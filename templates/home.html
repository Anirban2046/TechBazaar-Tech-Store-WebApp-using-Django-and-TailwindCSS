{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block content %}

<div class="bg-gradient-to-br from-slate-50 via-white to-blue-50 min-h-[83vh] p-0">

  <!-- Main Banner Slider with Enhanced Design -->
  <section class="relative overflow-hidden">
    <div class="w-[95vw] sm:w-[92vw] md:w-[90vw] max-w-none mx-auto mt-2 sm:mt-3 md:mt-4">
      <!-- Decorative background elements -->
      <div class="absolute top-0 left-0 w-16 h-16 sm:w-24 sm:h-24 md:w-32 md:h-32 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-xl sm:blur-2xl -z-10"></div>
      <div class="absolute bottom-0 right-0 w-20 h-20 sm:w-32 sm:h-32 md:w-40 md:h-40 bg-gradient-to-tl from-indigo-400/20 to-pink-400/20 rounded-full blur-xl sm:blur-2xl -z-10"></div>

      <!-- Swiper with enhanced styling -->
      <div class="swiper rounded-lg sm:rounded-xl md:rounded-2xl shadow-lg sm:shadow-xl md:shadow-2xl border border-white/50 backdrop-blur-sm overflow-hidden">
        <div class="swiper-wrapper">
          <!-- Slide 1 -->
          <div class="swiper-slide relative">
            <div class="absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent z-10"></div>
            <img src="{% static 'images/banners/banner_1.jpg' %}" 
                 class="w-full h-auto max-h-32 sm:max-h-48 md:max-h-60 lg:max-h-72 xl:max-h-[500px] object-contain rounded-lg sm:rounded-xl md:rounded-2xl">
          </div>
          <!-- Slide 2 -->
          <div class="swiper-slide relative">
            <div class="absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent z-10"></div>
            <img src="{% static 'images/banners/banner_2.jpg' %}" 
                 class="w-full h-auto max-h-32 sm:max-h-48 md:max-h-60 lg:max-h-72 xl:max-h-[500px] object-contain rounded-lg sm:rounded-xl md:rounded-2xl">
          </div>
          <!-- Slide 3 -->
          <div class="swiper-slide relative">
            <div class="absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent z-10"></div>
            <img src="{% static 'images/banners/banner_3.jpg' %}" 
                 class="w-full h-auto max-h-32 sm:max-h-48 md:max-h-60 lg:max-h-72 xl:max-h-[500px] object-contain rounded-lg sm:rounded-xl md:rounded-2xl">
          </div>
          <!-- Slide 4 -->
          <div class="swiper-slide relative">
            <div class="absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent z-10"></div>
            <img src="{% static 'images/banners/banner_4.jpg' %}" 
                 class="w-full h-auto max-h-32 sm:max-h-48 md:max-h-60 lg:max-h-72 xl:max-h-[500px] object-contain rounded-lg sm:rounded-xl md:rounded-2xl">
          </div>
        </div>
        <!-- Add subtle pagination dots -->
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </section>

  <!-- Enhanced Marquee Text -->
  <section class="overflow-hidden my-3 sm:my-4 md:my-6 flex justify-center">
    <div class="relative w-[95%] sm:w-[92%] md:w-[90%] bg-gradient-to-r from-white/90 via-blue-50/90 to-white/90 backdrop-blur-sm rounded-full-container px-3 py-2 sm:px-4 sm:py-2.5 md:px-6 md:py-3 border border-blue-100/50 shadow-md sm:shadow-lg">
      <div class="absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-blue-500/5 rounded-full-container"></div>
      <div class="marquee text-transparent bg-clip-text bg-gradient-to-r from-slate-800 via-blue-600 to-slate-800 text-xs sm:text-sm md:text-base lg:text-lg whitespace-nowrap font-poppins font-medium">
        Discover computers, laptops, PC components, smartphones, gadgets, accessories, and office equipment at TechBazaar with fast and dependable delivery throughout Bangladesh.
      </div>
    </div>
  </section>

  <!-- Popular Products with Enhanced Design -->
  <div class="container mx-auto w-[95%] sm:w-[92%] md:w-[90%] px-0">
    <!-- Enhanced Header Section -->
    <div class="flex flex-row flex-wrap items-center justify-between mb-3 sm:mb-4 md:mb-6 gap-2 p-2 sm:p-3 md:p-4 bg-gradient-to-r from-white/80 to-blue-50/80 rounded-lg sm:rounded-xl md:rounded-2xl border border-blue-100/50 backdrop-blur-sm shadow-md sm:shadow-lg">
      <!-- Title with icon -->
      <div class="flex items-center gap-1 sm:gap-2 flex-shrink-0">
        <h3 class="text-xs sm:text-sm md:text-lg lg:text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-600 flex-shrink-0">
          Featured Products
        </h3>
      </div>

      <!-- Right-aligned Sorting + Button -->
      <div class="flex flex-row flex-wrap items-center gap-1 sm:gap-2 md:gap-3">
        <!-- Enhanced Sorting Dropdown -->
        <form method="GET" class="flex items-center gap-1 sm:gap-2 flex-shrink-0">
          <label for="sort" class="text-[8px] sm:text-xs md:text-base text-slate-700 font-sans font-medium">
            Sort by:
          </label>
          <select name="sort" id="sort" class="border-2 border-blue-200/50 rounded-lg sm:rounded-xl px-1 sm:px-2 py-0.5 sm:py-1 text-[8px] sm:text-xs md:text-base font-sans font-medium w-20 sm:w-32 md:w-44 bg-white/80 backdrop-blur-sm shadow-sm focus:border-blue-400 focus:outline-none transition-all duration-300"
                  onchange="this.form.submit()">
            <option value="latest" {% if request.GET.sort == 'latest' %}selected{% endif %}>Latest</option>
            <option value="oldest" {% if request.GET.sort == 'oldest' %}selected{% endif %}>Oldest</option>
            <option value="price_high" {% if request.GET.sort == 'price_high' %}selected{% endif %}>Price: High → Low</option>
            <option value="price_low" {% if request.GET.sort == 'price_low' %}selected{% endif %}>Price: Low → High</option>
            <option value="alpha_az" {% if request.GET.sort == 'alpha_az' %}selected{% endif %}>A → Z</option>
            <option value="alpha_za" {% if request.GET.sort == 'alpha_za' %}selected{% endif %}>Z → A</option>
          </select>
        </form>

        <!-- Enhanced See All Button -->
        <a href="{% url 'store' %}" class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-2 py-0.5 sm:px-3 sm:py-1 rounded-lg sm:rounded-xl text-[8px] sm:text-xs md:text-base whitespace-nowrap flex-shrink-0 shadow-md sm:shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 font-medium focus:outline-none">
          <i class="fas fa-arrow-right mr-1"></i>
          See all
        </a>
      </div>
    </div>

    <!-- Enhanced Product Grid -->
    <div class="grid gap-2 sm:gap-3 md:gap-4 lg:gap-6 grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {% for product in products %}
      <div class="bg-white/90 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl shadow-md sm:shadow-lg border border-white/50 transition-all duration-500 transform hover:-translate-y-1 sm:hover:-translate-y-2 hover:shadow-lg sm:hover:shadow-2xl hover:border-blue-200/50 group">
        <!-- Product image with enhanced styling -->
        <a href="{{ product.get_url }}" class="block overflow-hidden rounded-t-lg sm:rounded-t-xl md:rounded-t-2xl relative focus:outline-none">
          <div class="w-full h-32 sm:h-40 md:h-48 lg:h-56 xl:h-72 bg-white relative overflow-hidden">
            <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <img src="{{ product.images.url }}" loading="lazy" class="h-full w-full object-contain transition-all duration-500 group-hover:scale-105">
          </div>
        </a>

        <!-- Enhanced Product details -->
        <div class="p-2 sm:p-3 md:p-4 flex flex-col">
          <!-- Product name -->
          <a href="{{ product.get_url }}" class="block text-[9px] sm:text-xs md:text-sm lg:text-base xl:text-lg font-semibold text-slate-800 hover:text-blue-600 transition-colors duration-300 mb-1 sm:mb-2 md:mb-3 min-h-[2rem] sm:min-h-[2.5rem] md:min-h-[3rem] lg:min-h-[3.5rem] line-clamp-3 focus:outline-none">
            {{ product.product_name }}
          </a>

          <!-- Enhanced Price -->
          <div class="flex items-center justify-between mb-1 sm:mb-2">
            <div class="text-[9px] sm:text-xs md:text-sm lg:text-base xl:text-lg text-gray-700 mt-1 font-sans font-bold">
              <span class="text-black">
                Tk {{ product.price|intcomma }}
              </span>
            </div>
          </div>

          <!-- Enhanced Ratings -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-0.5 mt-0.5 sm:mt-1 text-amber-400 text-[8px] sm:text-xs md:text-sm lg:text-base">
              {% for star in product.avg_stars %}
                <i class="{{ star }}"></i>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Enhanced TechBazaar Description Section -->
  <section class="mt-8 sm:mt-12 md:mt-16 px-3 sm:px-4 md:px-6 pt-4 sm:pt-6 md:pt-8 pb-8 sm:pb-12 md:pb-16 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white border-t border-gray-200 relative overflow-hidden">
    <!-- Background decorative elements -->
    <div class="absolute top-0 left-0 w-48 h-48 sm:w-72 sm:h-72 md:w-96 md:h-96 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-2xl sm:blur-3xl -translate-x-24 sm:translate-x-36 md:-translate-x-48 -translate-y-24 sm:-translate-y-36 md:-translate-y-48"></div>
    <div class="absolute bottom-0 right-0 w-48 h-48 sm:w-72 sm:h-72 md:w-96 md:h-96 bg-gradient-to-tl from-indigo-500/10 to-pink-500/10 rounded-full blur-2xl sm:blur-3xl translate-x-24 sm:translate-x-36 md:translate-x-48 translate-y-24 sm:translate-y-36 md:translate-y-48"></div>
    
    <div class="w-[95%] sm:w-[94%] md:w-[92.5%] mx-auto text-justify relative z-10">
      <!-- Enhanced Heading -->
      <div class="text-center mb-3 sm:mb-4">
        <div class="inline-flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3 md:mb-4">
          <h1 class="text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-extrabold leading-snug text-gray-100">
            Trusted Online Shop for <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-400">Computers, Laptops, Smartphones</span>, Gadgets & Accessories Across Bangladesh
          </h1>
        </div>
      </div>

      <!-- Enhanced Content Grid -->
      <div class="grid md:grid-cols-2 gap-3 sm:gap-4 md:gap-6 lg:gap-8 xl:gap-12">
        <div class="space-y-2 sm:space-y-3 md:space-y-4 lg:space-y-6 flex flex-col">
          <div class="bg-white/5 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-2 sm:p-3 md:p-4 lg:p-6 border border-white/10 hover:bg-white/10 transition-all duration-300 flex-1 flex flex-col">
            <div class="flex items-start gap-2 sm:gap-3 lg:gap-4 h-full">
              <div class="w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-md sm:rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0 mt-0.5 sm:mt-1">
                <i class="fas fa-shopping-cart text-white text-[8px] sm:text-xs md:text-sm lg:text-base"></i>
              </div>
              <p class="text-[10px] sm:text-xs md:text-sm lg:text-base xl:text-lg 2xl:text-xl text-gray-200 leading-relaxed">
                TechBazaar is your <span class="font-semibold text-white">one-stop online shop</span> for all things technology. We offer a wide range of computers, laptops, PC components, smartphones, gadgets, accessories, and office equipment. Our goal is to make technology accessible and convenient for everyone, providing a seamless online shopping experience.
              </p>
            </div>
          </div>

          <div class="bg-white/5 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-2 sm:p-3 md:p-4 lg:p-6 border border-white/10 hover:bg-white/10 transition-all duration-300 flex-1 flex flex-col">
            <div class="flex items-start gap-2 sm:gap-3 lg:gap-4 h-full">
              <div class="w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-md sm:rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0 mt-0.5 sm:mt-1">
                <i class="fas fa-award text-white text-[8px] sm:text-xs md:text-sm lg:text-base"></i>
              </div>
              <p class="text-[10px] sm:text-xs md:text-sm lg:text-base xl:text-lg 2xl:text-xl text-gray-200 leading-relaxed">
                At TechBazaar, we focus on <span class="font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400">quality, reliability, and customer satisfaction</span>. Every product we offer is carefully selected to meet high standards, ensuring that you receive the best technology solutions for work, gaming, or everyday life. Our user-friendly platform makes it easy to find the right products for your needs.
              </p>
            </div>
          </div>
        </div>

        <div class="space-y-2 sm:space-y-3 md:space-y-4 lg:space-y-6 flex flex-col">
          <div class="bg-white/5 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-2 sm:p-3 md:p-4 lg:p-6 border border-white/10 hover:bg-white/10 transition-all duration-300 flex-1 flex flex-col">
            <div class="flex items-start gap-2 sm:gap-3 lg:gap-4 h-full">
              <div class="w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-md sm:rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0 mt-0.5 sm:mt-1">
                <i class="fas fa-shipping-fast text-white text-[8px] sm:text-xs md:text-sm lg:text-base"></i>
              </div>
              <p class="text-[10px] sm:text-xs md:text-sm lg:text-base xl:text-lg 2xl:text-xl text-gray-200 leading-relaxed">
                Whether you are building a custom PC, upgrading your office setup, or exploring the latest gadgets, TechBazaar provides <span class="font-semibold text-white">fast and trusted service</span> every time. Our mission is to help you stay connected, productive, and entertained with the right technology at your fingertips.
              </p>
            </div>
          </div>

          <div class="bg-white/5 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-2 sm:p-3 md:p-4 lg:p-6 border border-white/10 hover:bg-white/10 transition-all duration-300 flex-1 flex flex-col">
            <div class="flex items-start gap-2 sm:gap-3 lg:gap-4 h-full">
              <div class="w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-md sm:rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0 mt-0.5 sm:mt-1">
                <i class="fas fa-shield-alt text-white text-[8px] sm:text-xs md:text-sm lg:text-base"></i>
              </div>
              <p class="text-[10px] sm:text-xs md:text-sm lg:text-base xl:text-lg 2xl:text-xl text-gray-200 leading-relaxed">
                We are committed to offering an <span class="font-semibold text-white">exceptional online shopping experience</span>, combining a wide product selection, reliable service, and a secure platform. At TechBazaar, technology meets convenience, helping you get the most out of your digital life.
              </p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

</div> <!-- End wrapper -->

<!-- Swiper.js CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />

<!-- Swiper.js JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

<script>
  const swiper = new Swiper('.swiper', {
    loop: true,
    autoplay: { delay: 4000, disableOnInteraction: false },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: false, // Hide arrows
    effect: 'fade',
    fadeEffect: { crossFade: true },
  });
</script>

<!-- Enhanced Custom Styles -->
<style>
  /* Enhanced Arc-like container */
  .rounded-full-container {
    border-radius: 50px / 25px;
    position: relative;
  }

  /* Enhanced Marquee animation */
  .marquee {
    display: inline-flex;
    white-space: nowrap;
    animation: marquee 45s linear infinite;
    font-weight: 500;
    animation-delay: 2s;
  }

  @keyframes marquee {
    0% {
      transform: translateX(100%);
    }
    100% {
      transform: translateX(-100%);
    }
  }

  /* Ensure marquee stays within container bounds */
  .rounded-full-container {
    border-radius: 50px / 25px;
    position: relative;
    overflow: hidden;
  }

  .font-poppins {
    font-family: 'Roboto Condensed', sans-serif;
  }

  /* Line clamp utility */
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Enhanced pagination dots */
  .swiper-pagination-bullet {
    background: rgba(255, 255, 255, 0.5);
    opacity: 1;
    transition: all 0.3s ease;
  }

  .swiper-pagination-bullet-active {
    background: linear-gradient(45deg, #3b82f6, #8b5cf6);
    transform: scale(1.2);
  }
</style>

{% endblock %}