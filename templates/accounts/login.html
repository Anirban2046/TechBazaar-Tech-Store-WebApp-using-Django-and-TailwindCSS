{% extends 'base.html' %}

{% block content %}

<section class="min-h-[83vh] py-6 bg-gray-50">

<!-- ============================ COMPONENT LOGIN ================================= -->

{% if request.GET.command == 'verification' %}

  <div class="container mx-auto bg-blue-100 text-center text-blue-800 rounded-lg p-4 shadow-md" style="max-width:1024px; margin-top:100px;">
    Thank you for registering with us. We have sent you a verification email to your email address [{{ request.GET.email }}]
    <br><br>
    Already verified? <a href="{% url 'login' %}" class="text-blue-700 underline hover:text-blue-900">Login</a>
  </div>

{% else %}

  <div class="container mx-auto mt-24 px-2 sm:px-4">
    <div class="max-w-sm mx-auto bg-white rounded-lg shadow-md p-4 sm:p-6 md:p-8">

      <div class="text-center mb-4">
        <h4 class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-semibold">Sign in</h4>
      </div>

      {% include 'includes/alerts.html' %}

      <form action="{% url 'login' %}" method="POST" class="space-y-4">
        {% csrf_token %}

        <!-- Email -->
        <div>
          <input type="email" name="email" placeholder="Email Address"
                 class="w-full border border-gray-300 rounded-md px-3 py-2
                        text-[10px] sm:text-sm md:text-base lg:text-lg
                        focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>

        <!-- Password with Toggle -->
        <div class="relative flex items-center">
          <input type="password" name="password" id="passwordInput" placeholder="Password"
                class="w-full border border-gray-300 rounded-md px-3 py-2
                        text-[10px] sm:text-sm md:text-base lg:text-lg
                        focus:ring-2 focus:ring-blue-500 focus:outline-none">
          <button type="button" id="togglePassword"
                  class="absolute right-2 flex items-center justify-center text-gray-500 hover:text-gray-700 focus:outline-none">
            <i data-feather="eye" class="w-6 h-3 sm:w-3 sm:h-3 md:w-6 md:h-4"></i>
          </button>
        </div>


        <!-- Forgot Password -->
        <div class="text-right">
          <a href="{% url 'forgotPassword' %}" class="text-sm sm:text-base text-blue-600 hover:text-blue-800">Forgot password?</a>
        </div>

        <!-- Submit -->
        <div>
          <button type="submit"
                  class="w-full bg-blue-500 text-white font-semibold rounded-md
                         py-2 sm:py-2.5 md:py-3 text-sm sm:text-base md:text-lg
                         hover:bg-blue-600 transition-colors duration-300">
            Login
          </button>
        </div>

      </form>
    </div>

    <!-- Sign up link -->
    <p class="text-center mt-4 text-sm sm:text-base md:text-lg">
      Don't have an account? 
      <a href="{% url 'register' %}" class="text-blue-600 hover:text-blue-800 no-underline">Sign up</a>
    </p>

{% endif %}

<!-- ============================ COMPONENT LOGIN END.// ================================= -->
</section>

<script>
  // Feather icons
  feather.replace();

  // Password toggle
  const passwordInput = document.getElementById('passwordInput');
  const togglePassword = document.getElementById('togglePassword');

  togglePassword.addEventListener('click', () => {
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      togglePassword.innerHTML = '<i data-feather="eye-off" class="w-6 h-3 sm:w-3 sm:h-3 md:w-6 md:h-4"></i>';
    } else {
      passwordInput.type = 'password';
      togglePassword.innerHTML = '<i data-feather="eye" class="w-6 h-3 sm:w-3 sm:h-3 md:w-6 md:h-4"></i>';
    }
    feather.replace(); // refresh icons
  });
</script>

{% endblock %}
