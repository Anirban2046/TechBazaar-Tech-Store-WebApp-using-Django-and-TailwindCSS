{% extends 'base.html' %}

{% block content %}

<section class="dashboard-container py-6">

  {% include 'includes/alerts.html' %}

  <div class="container mx-auto px-2 sm:px-4 lg:px-6">
    <div class="flex flex-col md:flex-col lg:flex-row lg:gap-6"> <!-- stacked for md and below -->

      <!-- Sidebar -->
      {% include 'includes/dashboard_sidebar.html' %}

      <!-- Main Content -->
      <main class="flex-1 mt-4 lg:mt-0">
        <article class="main-content-card rounded-2xl mb-6 overflow-hidden">
          <!-- Header -->
          <header class="header-section p-4 sm:p-6 relative z-10">
            <div class="welcome-badge inline-flex items-center gap-3 bg-gray-800 bg-opacity-80 backdrop-blur-sm rounded-full py-2 px-4 sm:px-6 mb-4 overflow-hidden">
              <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center shadow-lg">
                <i class="fa fa-user text-white text-sm sm:text-base"></i>
              </div>
              <div class="flex flex-col sm:flex-row sm:items-center sm:gap-2">
                <strong class="text-[10px] xs:text-xs sm:text-sm md:text-base lg:text-lg font-bold text-white">Hello, </strong>
                <span class="text-[10px] xs:text-xs sm:text-sm md:text-base lg:text-lg text-blue-200 font-medium">{{ user.full_name }}</span>
              </div>
            </div>
            
            <div class="text-white opacity-90">
              <h1 class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold mb-2">Dashboard Overview</h1>
            </div>
          </header>

          <!-- Cards -->
          <div class="p-4 sm:p-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6">

              <!-- Total Orders Card -->
              <div class="stats-card orders-card rounded-2xl p-6 text-center">
                <div class="mb-4">
                  <div class="w-16 h-16 mx-auto bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                    <i class="fa fa-box-open text-white text-2xl"></i>
                  </div>
                  <h5 class="text-[10px] xs:text-xs sm:text-sm md:text-base lg:text-lg font-bold text-gray-600 mb-3 uppercase tracking-wide">Total Orders</h5>
                  <h4 class="stats-number text-[12px] xs:text-sm sm:text-base md:text-xl lg:text-4xl mb-4">{{ orders_count }}</h4>
                </div>
                
                <a href="{% url 'my_orders' %}" 
                   class="view-orders-btn inline-flex items-center gap-2 text-[10px] xs:text-xs sm:text-sm md:text-base lg:text-lg text-white font-semibold py-3 px-6 rounded-full transition-all duration-300">
                  <span>View All Orders</span>
                  <i class="fa fa-arrow-right text-xs"></i>
                </a>
              </div>

              <!-- User Info Card -->
              <div class="stats-card profile-card rounded-2xl p-6 text-center">
                <div class="mb-4">
                  {% if userprofile.profile_picture %}
                    <div class="profile-image-container mb-4">
                      <img src="{{ userprofile.profile_picture.url }}" alt="User Profile Picture"
                           class="w-8 h-8 xs:w-10 xs:h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 lg:w-20 lg:h-20 rounded-full mx-auto shadow-lg">
                    </div>
                  {% else %}
                    <div class="w-16 h-16 mx-auto bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                      <i class="fa fa-user text-white text-2xl"></i>
                    </div>
                  {% endif %}
                  
                  <h5 class="text-[10px] xs:text-xs sm:text-sm md:text-base lg:text-lg font-bold text-gray-600 mb-4 uppercase tracking-wide">Profile Information</h5>
                </div>

                <div class="space-y-3">
                  <div class="info-item rounded-lg p-3 text-left">
                    <div class="flex items-center gap-3">
                      <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fa fa-envelope text-blue-600 text-sm"></i>
                      </div>
                      <p class="text-[10px] xs:text-xs sm:text-sm md:text-base lg:text-lg text-gray-700 font-medium">{{ user.email }}</p>
                    </div>
                  </div>
                  
                  <div class="info-item rounded-lg p-3 text-left">
                    <div class="flex items-center gap-3">
                      <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i class="fa fa-phone text-purple-600 text-sm"></i>
                      </div>
                      <p class="text-[10px] xs:text-xs sm:text-sm md:text-base lg:text-lg text-gray-700 font-medium">{{ user.phone_number }}</p>
                    </div>
                  </div>
                </div>
              </div>

            </div> <!-- grid -->
          </div> <!-- card body -->
        </article>
      </main>

    </div> <!-- flex container -->
  </div> <!-- container -->

</section>

<style>
.dashboard-container {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    min-height: 100vh;
}

.main-content-card {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 50%, #ffffff 100%);
    border: 1px solid #e2e8f0;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    backdrop-filter: blur(10px);
}

.header-section {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    position: relative;
    overflow: hidden;
}

.header-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(59, 130, 246, 0.1) 50%, transparent 70%);
}

.stats-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border: 1px solid #e2e8f0;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.stats-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.stats-card:hover::before {
    transform: scaleX(1);
}

.stats-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 25px -5px rgba(59, 130, 246, 0.2), 0 10px 10px -5px rgba(59, 130, 246, 0.1);
}

.orders-card {
    position: relative;
}

.orders-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.profile-card {
    position: relative;
}

.profile-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
}

.stats-number {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 900;
}

.view-orders-btn {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.view-orders-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.view-orders-btn:hover::before {
    left: 100%;
}

.view-orders-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.4);
}

.profile-image-container {
    position: relative;
    display: inline-block;
}

.profile-image-container::before {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    background: linear-gradient(135deg, #8b5cf6, #3b82f6, #10b981);
    border-radius: 50%;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.profile-image-container:hover::before {
    opacity: 1;
}

.info-item {
    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
    border-left: 4px solid #8b5cf6;
    transition: all 0.3s ease;
}

.info-item:hover {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    border-left-color: #3b82f6;
    transform: translateX(4px);
}

.welcome-badge {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    position: relative;
}

.welcome-badge::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
}

.welcome-badge:hover::before {
    transform: translateX(100%);
}
</style>

{% endblock %}