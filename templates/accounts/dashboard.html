{% extends 'base.html' %}

{% block content %}

<section class="py-2 sm:py-4 md:py-6 bg-gradient-to-br from-gray-50 to-slate-200 min-h-screen">

  {% include 'includes/alerts.html' %}

  <div class="container mx-auto px-1 xs:px-2 sm:px-3 md:px-4 lg:px-6">
    <div class="flex flex-col md:flex-col lg:flex-row lg:gap-6"> <!-- stacked for md and below -->

      <!-- Sidebar -->
      {% include 'includes/dashboard_sidebar.html' %}

      <!-- Main Content -->
      <main class="flex-1 mt-2 sm:mt-3 md:mt-4 lg:mt-0">
        <article class="bg-gradient-to-br from-white via-gray-50 to-white border border-slate-200 shadow-lg sm:shadow-xl lg:shadow-2xl backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl mb-3 sm:mb-4 md:mb-6 overflow-hidden">
          <!-- Header -->
          <header class="bg-gradient-to-br from-slate-800 to-slate-600 p-2 xs:p-3 sm:p-4 md:p-5 lg:p-6 relative z-10 overflow-hidden dashboard-header">
            <div class="welcome-badge inline-flex items-center gap-1 xs:gap-2 sm:gap-3 bg-gray-800 bg-opacity-80 backdrop-blur-sm rounded-full py-1 xs:py-2 px-2 xs:px-3 sm:px-4 md:px-6 mb-2 sm:mb-3 md:mb-4 overflow-hidden relative">
              <div class="w-6 h-6 xs:w-7 xs:h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 lg:w-10 lg:h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center shadow-lg">
                <i class="fa fa-user text-white text-xs sm:text-sm md:text-base"></i>
              </div>
              <div class="flex flex-row items-center gap-1 sm:gap-2">
                <strong class="text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs lg:text-sm xl:text-base font-bold text-white">Hello, </strong>
                <span class="text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs lg:text-sm xl:text-base text-blue-200 font-medium">{{ user.full_name }}</span>
              </div>
            </div>
            
            <div class="text-white opacity-90">
              <h1 class="text-sm xs:text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-bold mb-1 sm:mb-2">Dashboard Overview</h1>
            </div>
          </header>

          <!-- Cards -->
          <div class="p-2 xs:p-3 sm:p-4 md:p-5 lg:p-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 xs:gap-3 sm:gap-4 md:gap-5 lg:gap-6">

              <!-- Total Orders Card -->
              <div class="stats-card bg-gradient-to-br from-white to-gray-50 border border-slate-200 shadow-lg sm:shadow-xl rounded-lg sm:rounded-xl md:rounded-2xl p-3 xs:p-4 sm:p-5 md:p-6 text-center relative overflow-hidden transform transition-all duration-300 hover:-translate-y-1 sm:hover:-translate-y-1 lg:hover:-translate-y-2 hover:shadow-xl hover:shadow-blue-200/50 sm:hover:shadow-2xl sm:hover:shadow-blue-200/50 lg:hover:shadow-2xl lg:hover:shadow-blue-200/50 orders-card">
                <div class="mb-2 xs:mb-3 sm:mb-4">
                  <div class="w-10 h-10 xs:w-12 xs:h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 mx-auto bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-lg mb-2 xs:mb-3 sm:mb-4">
                    <i class="fa fa-box-open text-white text-sm xs:text-base sm:text-lg md:text-xl lg:text-2xl"></i>
                  </div>
                  <h5 class="text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs lg:text-sm xl:text-base font-bold text-gray-600 mb-2 xs:mb-3 uppercase tracking-wide">Total Orders</h5>
                  <h4 class="stats-number text-sm xs:text-base sm:text-lg md:text-xl lg:text-2xl xl:text-4xl mb-2 xs:mb-3 sm:mb-4 bg-gradient-to-r from-blue-500 to-blue-700 bg-clip-text text-transparent font-black">{{ orders_count }}</h4>
                </div>
                
                <a href="{% url 'my_orders' %}" 
                   class="view-orders-btn inline-flex items-center gap-1 xs:gap-2 text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs lg:text-sm xl:text-base text-white font-semibold py-2 xs:py-2.5 sm:py-3 px-3 xs:px-4 sm:px-5 md:px-6 rounded-full bg-gradient-to-r from-blue-500 to-blue-700 transition-all duration-300 relative overflow-hidden hover:-translate-y-0.5 sm:hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/40 sm:hover:shadow-xl sm:hover:shadow-blue-500/40">
                  <span>View All Orders</span>
                  <i class="fa fa-arrow-right text-[8px] xs:text-[9px] sm:text-xs"></i>
                </a>
              </div>

              <!-- User Info Card -->
              <div class="stats-card bg-gradient-to-br from-white to-gray-50 border border-slate-200 shadow-lg sm:shadow-xl rounded-lg sm:rounded-xl md:rounded-2xl p-3 xs:p-4 sm:p-5 md:p-6 text-center relative overflow-hidden transform transition-all duration-300 hover:-translate-y-1 sm:hover:-translate-y-1 lg:hover:-translate-y-2 hover:shadow-xl hover:shadow-blue-200/50 sm:hover:shadow-2xl sm:hover:shadow-blue-200/50 lg:hover:shadow-2xl lg:hover:shadow-blue-200/50 profile-card">
                <div class="mb-2 xs:mb-3 sm:mb-4">
                  {% if userprofile.profile_picture %}
                    <div class="profile-image-container mb-2 xs:mb-3 sm:mb-4 relative inline-block">
                      <img src="{{ userprofile.profile_picture.url }}" alt="User Profile Picture"
                           class="w-10 h-10 xs:w-12 xs:h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-18 lg:h-18 xl:w-20 xl:h-20 rounded-full mx-auto shadow-lg object-cover">
                    </div>
                  {% else %}
                    <div class="w-10 h-10 xs:w-12 xs:h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 mx-auto bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center shadow-lg mb-2 xs:mb-3 sm:mb-4">
                      <i class="fa fa-user text-white text-sm xs:text-base sm:text-lg md:text-xl lg:text-2xl"></i>
                    </div>
                  {% endif %}
                  
                  <h5 class="text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs lg:text-sm xl:text-base font-bold text-gray-600 mb-2 xs:mb-3 sm:mb-4 uppercase tracking-wide">Profile Information</h5>
                </div>

                <div class="space-y-2 xs:space-y-2.5 sm:space-y-3">
                  <div class="info-item bg-gradient-to-r from-slate-100 to-slate-200 border-l-2 sm:border-l-4 border-purple-500 rounded-md sm:rounded-lg p-2 xs:p-2.5 sm:p-3 text-left transition-all duration-300 hover:bg-gradient-to-r hover:from-blue-50 hover:to-blue-100 hover:border-blue-500 hover:translate-x-1 sm:hover:translate-x-1">
                    <div class="flex items-center gap-2 xs:gap-2.5 sm:gap-3">
                      <div class="w-6 h-6 xs:w-7 xs:h-7 sm:w-8 sm:h-8 bg-blue-100 rounded-md sm:rounded-lg flex items-center justify-center">
                        <i class="fa fa-envelope text-blue-600 text-[10px] xs:text-xs sm:text-sm"></i>
                      </div>
                      <p class="text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs lg:text-sm xl:text-base text-gray-700 font-medium">{{ user.email }}</p>
                    </div>
                  </div>
                  
                  <div class="info-item bg-gradient-to-r from-slate-100 to-slate-200 border-l-2 sm:border-l-4 border-purple-500 rounded-md sm:rounded-lg p-2 xs:p-2.5 sm:p-3 text-left transition-all duration-300 hover:bg-gradient-to-r hover:from-blue-50 hover:to-blue-100 hover:border-blue-500 hover:translate-x-1 sm:hover:translate-x-1">
                    <div class="flex items-center gap-2 xs:gap-2.5 sm:gap-3">
                      <div class="w-6 h-6 xs:w-7 xs:h-7 sm:w-8 sm:h-8 bg-purple-100 rounded-md sm:rounded-lg flex items-center justify-center">
                        <i class="fa fa-phone text-purple-600 text-[10px] xs:text-xs sm:text-sm"></i>
                      </div>
                      <p class="text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs lg:text-sm xl:text-base text-gray-700 font-medium">{{ user.phone_number }}</p>
                    </div>
                  </div>
                </div>
              </div>

            </div> <!-- grid -->
          </div> <!-- card body -->
        </article>
      </main>

    </div> <!-- flex container -->
  </div> <!-- container -->

</section>

<style>
/* Header decorative overlay effect */
.dashboard-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(59, 130, 246, 0.1) 50%, transparent 70%);
}

/* Top border accent animations for cards */
.stats-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

@media (min-width: 640px) {
    .stats-card::before {
        height: 4px;
    }
}

.stats-card:hover::before {
    transform: scaleX(1);
}

/* Orders card specific accent */
.orders-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

@media (min-width: 640px) {
    .orders-card::after {
        height: 4px;
    }
}

/* Profile card specific accent */
.profile-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
}

@media (min-width: 640px) {
    .profile-card::after {
        height: 4px;
    }
}

/* Button shimmer effect */
.view-orders-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.view-orders-btn:hover::before {
    left: 100%;
}

/* Profile image border animation */
.profile-image-container::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(135deg, #8b5cf6, #3b82f6, #10b981);
    border-radius: 50%;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
}

@media (min-width: 640px) {
    .profile-image-container::before {
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: -4px;
    }
}

.profile-image-container:hover::before {
    opacity: 1;
}

/* Welcome badge shimmer effect */
.welcome-badge::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
}

.welcome-badge:hover::before {
    transform: translateX(100%);
}

/* Custom breakpoint for very small screens */
@media (max-width: 374px) {
    .text-\[8px\] {
        font-size: 7px;
    }
    
    .text-\[9px\] {
        font-size: 8px;
    }
    
    .text-\[10px\] {
        font-size: 9px;
    }
}
</style>

{% endblock %}