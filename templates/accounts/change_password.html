{% extends 'base.html' %}

{% block content %}

<section class="py-6 bg-gray-50">
  {% include 'includes/alerts.html' %}

  <div class="container mx-auto px-2 sm:px-4">
    <div class="flex flex-col lg:flex-row lg:gap-6">

      <!-- Sidebar -->
      {% include 'includes/dashboard_sidebar.html' %}

      <!-- Main Content -->
      <main class="flex-1 lg:w-2/3">
        <article class="bg-white rounded-lg shadow-md mb-6">

          <!-- Header -->
          <header class="bg-gray-100 p-4 rounded-t-lg text-base sm:text-lg md:text-xl font-semibold">
            Change Your Password
          </header>

          <!-- Form -->
          <div class="pt-2 pb-4 px-4 sm:pt-2 sm:pb-5 sm:px-5 md:pt-3 md:pb-6 md:px-6 lg:pt-4 lg:pb-8 lg:px-8">
            <form action="{% url 'change_password' %}" method="POST">
              {% csrf_token %}

              <!-- Current Password -->
              <div class="flex flex-col mb-4">
                <label for="currentPassword" class="mb-1 text-sm md:text-base lg:text-lg font-medium">
                  Current Password
                </label>
                <div class="relative">
                  <input type="password" name="current_password" id="currentPassword" placeholder="Current Password"
                         class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm md:text-base lg:text-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" required>
                  <button type="button"
                          class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none toggle-password">
                    <i data-feather="eye" class="w-5 h-5"></i>
                  </button>
                </div>
              </div>

              <!-- New Password -->
              <div class="flex flex-col mb-4">
                <label for="newPassword" class="mb-1 text-sm md:text-base lg:text-lg font-medium">
                  Create New Password
                </label>
                <div class="relative">
                  <input type="password" name="new_password" id="newPassword" placeholder="Create New Password"
                         class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm md:text-base lg:text-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" required>
                  <button type="button"
                          class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none toggle-password">
                    <i data-feather="eye" class="w-5 h-5"></i>
                  </button>
                </div>
              </div>

              <!-- Confirm Password -->
              <div class="flex flex-col mb-6">
                <label for="confirmPassword" class="mb-1 text-sm md:text-base lg:text-lg font-medium">
                  Confirm New Password
                </label>
                <div class="relative">
                  <input type="password" name="confirm_password" id="confirmPassword" placeholder="Confirm New Password"
                         class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm md:text-base lg:text-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" required>
                  <button type="button"
                          class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none toggle-password">
                    <i data-feather="eye" class="w-5 h-5"></i>
                  </button>
                </div>
              </div>

              <!-- Submit Button -->
              <div>
                <button type="submit"
                        class="w-full bg-blue-500 text-white font-semibold rounded-md py-2 sm:py-2.5 md:py-3 lg:py-3 text-sm sm:text-base md:text-lg lg:text-lg hover:bg-blue-600 transition-colors duration-300">
                  Submit
                </button>
              </div>
            </form>
          </div>

        </article>
      </main>
    </div>
  </div>
</section>

<script>
  // Feather icons
  feather.replace();

  // Password toggle
  document.querySelectorAll('.toggle-password').forEach(button => {
    button.addEventListener('click', () => {
      const input = button.previousElementSibling;
      if (input.type === 'password') {
        input.type = 'text';
        button.innerHTML = '<i data-feather="eye-off" class="w-5 h-5"></i>';
      } else {
        input.type = 'password';
        button.innerHTML = '<i data-feather="eye" class="w-5 h-5"></i>';
      }
      feather.replace();
    });
  });
</script>

{% endblock %}
